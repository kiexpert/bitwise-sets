<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport"content="width=device-width,initial-scale=1.0"><title>WkJSON Formatter</title>
<style>
body{margin:0;padding:0;font-family:Consolas,monospace;background:#111;color:#eee;display:flex;flex-direction:column;height:100vh}
header{padding:10px 16px;background:#222;font-size:18px;font-weight:bold;flex:none;white-space:nowrap}
header span{color:#00eaff}
section{flex:1;display:flex;gap:4px;padding:4px}
textarea{flex:1;background:#000;border:1px solid #333;color:#0f0;font-size:13px;resize:none;padding:6px;box-sizing:border-box;overflow:auto;line-height:1.3}
#out{white-space:pre}
.controls{padding:6px 12px;background:#222;display:flex;gap:6px;flex:none}
button{padding:6px 10px;background:#444;border:none;color:#eee;cursor:pointer;font-size:12px;border-radius:3px}
button:hover{background:#555}
.key{color:#8cf}
.num{color:#ffb347}
.str{color:#c5e1ff}
.bracket{color:#aaa}
.ln{color:#666;user-select:none;margin-right:8px}
pre{margin:0;white-space:pre}
</style></head><body>
<header>WkJSON — Well Keyed JSON Formatter <span>by Will Kim & DeepToHyde</span></header>
<div class="controls">
<button id="convertBtn">Convert</button>
<button id="copyIn">Copy IN</button>
<button id="copyOut">Copy OUT</button>
<button id="loadSample">Sample JSON</button>
</div>
<section>
<textarea id="input" wrap="soft"></textarea>
<textarea id="output" wrap="off"></textarea>
</section>

<script>
const input=document.getElementById("input"),output=document.getElementById("output")
const converBtn=document.getElementById("convertBtn"),copyIn=document.getElementById("copyIn"),copyOut=document.getElementById("copyOut"),loadSample=document.getElementById("loadSample")

function wkDump(obj){
let s=JSON.stringify(obj,null).replace(/,|:/g,m=>m+" ")
s=s.replace(/(, |{ )\s*"(?=[^0-9-])/,m=>"\n"+m)
s=s.replace(/}[\n]?, "(?=[^0-9-])/,m=>"\n},"")
return s}

function highlight(s){
return s
.replace(/"(.*?)":/g,'<span class="key">"$1"</span>:')
.replace(/\b(-?\d+(\.\d+)?)\b/g,'<span class="num">$1</span>')
.replace(/"(.*?)"/g,'<span class="str">"$1"</span>')
.replace(/[\{\}\[\]]/g,m=>'<span class="bracket">'+m+'</span>')
}

function addLineNumbers(s){
const lines=s.split("\n").map((l,i)=>`<span class="ln">${String(i+1).padStart(3," ")}</span>${l}`)
return lines.join("\n")
}

function convert(){
try{
const obj=JSON.parse(input.value)
let s=wkDump(obj)
s=s.split("\n").map(l=>highlight(l)).join("\n")
s=addLineNumbers(s)
output.innerHTML=s
}catch(e){output.innerHTML="❌ JSON Parse Error: "+e.message}
}

converBtn.onclick=convert
copyIn.onclick=()=>navigator.clipboard.writeText(input.value)
copyOut.onclick=()=>navigator.clipboard.writeText(output.innerText)
loadSample.onclick=()=>fetch("default.json").then(r=>r.text()).then(t=>{input.value=t;convert()})

window.addEventListener('load',()=>setTimeout(()=>loadSample.click(),1000))
</script>
</body></html>
